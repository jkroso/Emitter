// Emitter - v0.5.0 - 2012-10-22
// https://github.com/jkroso/Emitter
// Copyright (c) 2012 Jakeb Rosoman; Licensed MIT
define("Emitter",[],function(){function e(t){if(t)return Object.keys(e.prototype).forEach(function(n){t.hasOwnProperty(n)||Object.defineProperty(t,n,{value:e.prototype[n],writable:!0,configurable:!0})}),e.call(t);Object.defineProperties(this,{_callbacks:{value:{},writable:!0}})}var t=e.prototype;return t.publish=function(e,t){var n;if(n=this._callbacks){n=n[e];if(n){var r=n.length;while(r--)n[r].call(n[--r],t)}}return this},t.on=function(e,t,n){var r=this._callbacks||(this._callbacks={});return e.split(/\s+/).forEach(function(e){r[e]=[n||this,t].concat(r[e]||[])},this),this},t.once=function(e,t,n){return e.split(/\s+/).forEach(function(e){function i(s){r.off(e,i),t.call(n,s)}var r=this;this.on(e,t,n)}),this},t.off=function(e,t){var n=this._callbacks;return n&&(e?t?e.split(/\s+/).forEach(function(e){var r=n[e];if(r){r=r.slice();var i=r.length;while(i--)if(r[i--]===t){r.splice(i,2),n[e]=r;break}}}):e.split(/\s+/).forEach(function(e){delete n[e]}):this._callbacks={}),this},e});